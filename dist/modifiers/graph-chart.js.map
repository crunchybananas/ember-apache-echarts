{"version":3,"file":"graph-chart.js","sources":["../../src/modifiers/graph-chart.ts"],"sourcesContent":["import { tracked } from '@glimmer/tracking';\nimport mergeAtPaths from '../utils/merge-at-paths.ts';\nimport AbstractChartModifier from './abstract-chart.ts';\nimport resolveStyle from '../utils/style/resolve-style.ts';\nimport computeTextMetrics from '../utils/layout/compute-text-metrics.ts';\nimport deepMerge from '../utils/deep-merge.ts';\nimport type { ECharts, SelectChangedPayload } from 'echarts';\n\ntype SeriesConfig = {\n  type: string;\n  layout: string;\n  animation: boolean;\n  roam: boolean;\n  symbol: string;\n  symbolKeepAspect: boolean;\n  symbolSize: [number, number];\n  edgeSymbol: [string, string];\n  edgeShape: string;\n  label: {\n    show: boolean;\n    position: string;\n    color: string;\n  };\n  force: {\n    repulsion: number;\n    gravity: number;\n    edgeLength: [number, number];\n  };\n  data?: unknown[];\n  links?: unknown[];\n};\n\nconst defaultSeriesConfig: SeriesConfig = {\n  type: 'graph',\n  layout: 'force',\n  animation: false,\n  roam: true,\n  symbol: 'rect',\n  symbolKeepAspect: true,\n  symbolSize: [150, 60],\n  edgeSymbol: ['none', 'arrow'],\n  edgeShape: 'polyline',\n  label: {\n    show: true,\n    position: 'top',\n    color: '#000',\n  },\n  force: {\n    repulsion: 600,\n    gravity: 0.01,\n    edgeLength: [200, 350],\n  },\n};\n\ntype ChartArgs = {\n  tooltipFormatter?: (params: unknown) => string;\n  onSelect?: (name: string | null) => void;\n  data: unknown[];\n  links: unknown[];\n  seriesConfig?: Partial<SeriesConfig>;\n  series: unknown[];\n  title?: string;\n};\n\ntype TitleContext = {\n  layout: {\n    width: number;\n    height: number;\n    x: number;\n    y: number;\n  };\n  args: {\n    title?: string;\n    drillUpButtonText?: string;\n  };\n  data: {\n    title?: string;\n  };\n  styles: {\n    chartTitle: unknown;\n    drillUpButton: unknown;\n  };\n};\n\ntype TitleConfig = {\n  title?: {\n    text: string;\n    left: number;\n    top: number;\n  }[];\n};\n\nexport default class GraphChartModifier extends AbstractChartModifier {\n  @tracked drillPath = [];\n\n  /**\n   * Configures the chart with the provided arguments.\n   */\n  // @ts-expect-error: return to this\n  configureChart(args: ChartArgs, chart: ECharts) {\n    const { tooltipFormatter, onSelect, data, links, seriesConfig = {} } = args;\n    // @ts-expect-error: return to this\n    const { config } = this.buildLayout(args, chart);\n\n    const finalSeriesConfig = deepMerge(defaultSeriesConfig, { ...seriesConfig, data, links });\n\n    chart.setOption({\n      ...config,\n      tooltip: {\n        formatter: tooltipFormatter,\n      },\n      animationThreshold: 1000,\n      layoutAnimation: false,\n      series: [finalSeriesConfig],\n    });\n\n    chart.on('selectchanged', (event) => {\n      const { fromAction, fromActionPayload, isFromClick } = event as SelectChangedPayload;\n\n      if (!isFromClick) {\n        return;\n      }\n\n      const seriesIndex = fromActionPayload['seriesIndex'];\n      const dataIndex = fromActionPayload['dataIndexInside'];\n      const series = args.series[seriesIndex];\n      // @ts-expect-error: TypeScript doesn't know about the structure of `series.data`\n      const name = series.data[dataIndex] ? series.data[dataIndex].name : null;\n\n      if (name) {\n        chart.dispatchAction({\n          type: fromAction,\n          name,\n        });\n      }\n\n      onSelect && onSelect(fromAction === 'select' ? name : null);\n    });\n  }\n\n  /**\n   * Generates the `data` section of the context used to construct this chart.\n   */\n  // @ts-expect-error: return to this\n  createContextData(args: ChartArgs) {\n    // @ts-expect-error: return to this\n    const context = super.createContextData(args);\n    const { series, title } = this.drillPath.reduce(\n      ({ series }, pathIndex) => ({\n        // @ts-expect-error: return to this\n        series: series[pathIndex].series,\n        // @ts-expect-error: return to this\n        title: series[pathIndex].label,\n      }),\n      { series: context.series, title: args.title }\n    );\n\n    return {\n      ...context,\n      series,\n      title,\n    };\n  }\n\n  /**\n   * Adds the title to `config` as defined in the data or by `args` and returns\n   * the new context layout.\n   */\n  // @ts-expect-error: return to this\n  addTitle(context: TitleContext, config: TitleConfig) {\n    const buttonLayout = this.addDrillUpButton(context, config);\n    const buttonWidth = context.layout.width - buttonLayout.width;\n    const buttonHeight = context.layout.height - buttonLayout.height;\n\n    const titleLayout = super.addTitle(\n      // @ts-expect-error: return to this\n      {\n        ...context,\n        args: {\n          ...context.args,\n          title: context.data.title ?? context.args.title,\n        },\n      },\n      config\n    );\n\n    if (config.title?.[0]) {\n      const titleHeight = context.layout.height - titleLayout.height;\n\n      if (buttonHeight > titleHeight) {\n        const heightDifference = buttonHeight - titleHeight;\n\n        titleLayout.height -= heightDifference;\n        titleLayout.y += heightDifference;\n\n        // Center the title within the height of the button\n        config.title[0].top = config.title[0].top / 2 + heightDifference / 2;\n      }\n\n      config.title[0].left += buttonWidth;\n    }\n\n    return titleLayout;\n  }\n\n  /**\n   * Adds the drill up button to `config` and returns the new context layout.\n   */\n  addDrillUpButton(context: TitleContext, config: TitleConfig) {\n    if (!this.drillPath.length) {\n      return context.layout;\n    }\n\n    const { layout, args, styles } = context;\n    const { drillUpButtonText = '<' } = args;\n    // @ts-expect-error: Need to figure out what these do\n    const style = resolveStyle(styles.drillUpButton, layout);\n    // @ts-expect-error: Need to figure out what these do\n    const titleStyle = resolveStyle(styles.chartTitle, layout);\n    const xMargins = style.marginLeft + style.marginRight;\n    const yMargins = style.marginTop + style.marginBottom;\n\n    // Ensure the button aligns with where the title is positioned\n    style.marginTop += titleStyle.marginTop;\n    style.marginLeft += titleStyle.marginLeft;\n\n    const buttonConfig = this.generateDrillUpButtonConfig(drillUpButtonText, layout, style);\n\n    mergeAtPaths(config, [buttonConfig]);\n\n    const buttonBox = buttonConfig['graphic.elements'][0]?.children?.[0]?.shape;\n\n    return {\n      ...layout,\n      width: layout.width - (buttonBox?.width ?? 0) - xMargins,\n      height: layout.height - (buttonBox?.height ?? 0) - yMargins,\n      x: layout.x + (buttonBox?.width ?? 0) + xMargins,\n      y: layout.y + (buttonBox?.height ?? 0) + yMargins,\n    };\n  }\n\n  /**\n   * Generates the configuration for the drill up button.\n   */\n  // @ts-expect-error: Need to figure out what these do\n  generateDrillUpButtonConfig(text: string, layout, style) {\n    const textMetrics = computeTextMetrics(text, style);\n\n    return {\n      'graphic.elements': [\n        {\n          type: 'group',\n          left: style.marginLeft,\n          top: style.marginTop,\n          children: [\n            // NOTE: This element is referenced by path in `addDrillUpButton`\n            {\n              type: 'rect',\n              shape: {\n                width: textMetrics.width + style.paddingLeft + style.paddingRight,\n                height: textMetrics.fontHeight + style.paddingTop + style.paddingBottom,\n                r: [\n                  style.borderTopLeftRadius ?? 0,\n                  style.borderTopRightRadius ?? 0,\n                  style.borderBottomRightRadius ?? 0,\n                  style.borderBottomLeftRadius ?? 0,\n                ],\n              },\n              style: {\n                stroke: style.borderColor ?? '#fff',\n                fill: style.backgroundColor ?? '#fff',\n              },\n            },\n            {\n              type: 'text',\n              x: style.paddingLeft,\n              y: style.paddingTop,\n              style: {\n                fill: style.color,\n                text,\n                font: `${style.fontStyle} ${style.fontWeight} ${style.fontSize}px ${style.fontFamily}`,\n              },\n              textConfig: {\n                distance: 0,\n                inside: true,\n                position: [10, 0],\n              },\n            },\n          ],\n          // @ts-expect-error: Need to figure out what these do\n          onclick: () => this.drillPath.popObject(),\n        },\n      ],\n    };\n  }\n\n  /**\n   * Generates the plot configuration for the graph chart.\n   */\n  // @ts-expect-error: Need to figure out what these do\n  generatePlotConfig(info, _cell, _context, _gridIndex) {\n    // Implement the logic to generate the plot configuration\n    return {\n      // Example configuration\n      series: [\n        {\n          type: 'graph',\n          layout: 'force',\n          data: info.data,\n          links: info.links,\n          roam: true,\n          label: {\n            show: true,\n          },\n          force: {\n            repulsion: 1000,\n          },\n        },\n      ],\n    };\n  }\n\n  /**\n   * Default styles for the graph chart.\n   */\n  get defaultStyles() {\n    const styles = super.defaultStyles;\n\n    return {\n      ...styles,\n      plot: {},\n      node: {\n        font: 'normal 12px Montserrat,sans-serif',\n        textAlign: 'center',\n        marginTop: 8,\n      },\n      link: {\n        color: '#000',\n        font: 'normal 12px Montserrat,sans-serif',\n        marginRight: 8,\n      },\n      drillUpButton: {\n        margin: 0,\n        color: '#000',\n        font: 'normal 22px Montserrat,sans-serif',\n        marginRight: 10,\n      },\n    };\n  }\n}\n"],"names":["defaultSeriesConfig","type","layout","animation","roam","symbol","symbolKeepAspect","symbolSize","edgeSymbol","edgeShape","label","show","position","color","force","repulsion","gravity","edgeLength","GraphChartModifier","AbstractChartModifier","g","prototype","tracked","i","void 0","configureChart","args","chart","tooltipFormatter","onSelect","data","links","seriesConfig","config","buildLayout","finalSeriesConfig","deepMerge","setOption","tooltip","formatter","animationThreshold","layoutAnimation","series","on","event","fromAction","fromActionPayload","isFromClick","seriesIndex","dataIndex","name","dispatchAction","createContextData","context","title","drillPath","reduce","pathIndex","addTitle","buttonLayout","addDrillUpButton","buttonWidth","width","buttonHeight","height","titleLayout","titleHeight","heightDifference","y","top","left","length","styles","drillUpButtonText","style","resolveStyle","drillUpButton","titleStyle","chartTitle","xMargins","marginLeft","marginRight","yMargins","marginTop","marginBottom","buttonConfig","generateDrillUpButtonConfig","mergeAtPaths","buttonBox","children","shape","x","text","textMetrics","computeTextMetrics","paddingLeft","paddingRight","fontHeight","paddingTop","paddingBottom","r","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","stroke","borderColor","fill","backgroundColor","font","fontStyle","fontWeight","fontSize","fontFamily","textConfig","distance","inside","onclick","popObject","generatePlotConfig","info","_cell","_context","_gridIndex","defaultStyles","plot","node","textAlign","link","margin"],"mappings":"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"}