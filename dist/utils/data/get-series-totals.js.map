{"version":3,"file":"get-series-totals.js","sources":["../../../src/utils/data/get-series-totals.ts"],"sourcesContent":["// @ts-expect-error: remove lodash\nimport { flatten, transform } from 'lodash-es';\n\ntype DataItem = {\n  data: { [key: string]: unknown }[];\n  [key: string]: unknown;\n};\n\n/**\n * Compute the sum of all values in the series in `data` for each category in\n * `categories`.\n *\n * @param {object[]} data             An array of data objects\n * @param {string[]} categories       An array of category names\n * @param {string}   categoryProperty The name of the property in each data\n *                                    object that represents the category\n * @param {string}   valueProperty    The name of the property in each data\n *                                    object that represents the value\n\n * @return {number[]} An array of the sums for the values for each category\n */\nexport default function getSeriesTotals(\n  data: DataItem[],\n  categories: string[],\n  categoryProperty: string,\n  valueProperty: string\n) {\n  const allData = flatten(data.map((info) => info.data));\n\n  return Object.values(\n    transform(\n      allData,\n      // @ts-expect-error: remove lodash\n      (totals, item) => {\n        totals[item?.[categoryProperty]] =\n          (totals[item?.[categoryProperty]] ?? 0) + (item?.[valueProperty] ?? 0);\n      },\n      {}\n    )\n  );\n}\n"],"names":["getSeriesTotals","data","categories","categoryProperty","valueProperty","allData","flatten","map","info","Object","values","transform","totals","item"],"mappings":";;AAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,eAAeA,CACrCC,IAAgB,EAChBC,UAAoB,EACpBC,gBAAwB,EACxBC,aAAqB,EACrB;AACA,EAAA,MAAMC,OAAO,GAAGC,OAAO,CAACL,IAAI,CAACM,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACP,IAAI,CAAC,CAAC,CAAA;AAEtD,EAAA,OAAOQ,MAAM,CAACC,MAAM,CAClBC,SAAS,CACPN,OAAO;AACP;EACA,CAACO,MAAM,EAAEC,IAAI,KAAK;IAChBD,MAAM,CAACC,IAAI,GAAGV,gBAAgB,CAAC,CAAC,GAC9B,CAACS,MAAM,CAACC,IAAI,GAAGV,gBAAgB,CAAC,CAAC,IAAI,CAAC,KAAKU,IAAI,GAAGT,aAAa,CAAC,IAAI,CAAC,CAAC,CAAA;AAC1E,GAAC,EACD,EACF,CACF,CAAC,CAAA;AACH;;;;"}