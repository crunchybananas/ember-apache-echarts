{"version":3,"file":"compute-max-text-metrics.js","sources":["../../../src/utils/layout/compute-max-text-metrics.ts"],"sourcesContent":["import computeTextMetrics from './compute-text-metrics.ts';\n\n/**\n * Returns the width and height required to render each of the strings contained\n * in `array` when rendered with `style`. If `maxWidth` is set, then wraps text\n * that may be longer.\n *\n * @param {string[]} array    An array of strings to render as text\n * @param {object}   style    An object containing CSS properties\n * @param {number}   maxWidth The maximum width to render the text within\n *\n * @return {object} An object specifying the `width` and `height` that is\n *                  sufficient to contain each of the strings in `array` when\n *                  rendered\n */\n// @ts-expect-error: not sure\nconst computeMaxTextMetrics = (array: string[], style, maxWidth: number) =>\n  array.reduce(\n    (maxMetrics, text) => {\n      const textMetrics = computeTextMetrics(text, style);\n\n      // Wrap at the pixel level--not accurate, but good enough for now\n      if (maxWidth && textMetrics.width > maxWidth) {\n        const lineCount = Math.ceil(textMetrics.width / maxWidth);\n\n        // Assume 2px between lines\n        textMetrics.height = textMetrics.height * lineCount + (lineCount - 1) * 2;\n      }\n\n      maxMetrics.width = Math.max(maxMetrics.width, textMetrics.width);\n      maxMetrics.height = Math.max(maxMetrics.height, textMetrics.height);\n\n      return maxMetrics;\n    },\n    {\n      width: 0,\n      height: 0,\n    }\n  );\n\nexport default computeMaxTextMetrics;\n"],"names":["computeMaxTextMetrics","array","style","maxWidth","reduce","maxMetrics","text","textMetrics","computeTextMetrics","width","lineCount","Math","ceil","height","max"],"mappings":";;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,qBAAqB,GAAGA,CAACC,KAAe,EAAEC,KAAK,EAAEC,QAAgB,KACrEF,KAAK,CAACG,MAAM,CACV,CAACC,UAAU,EAAEC,IAAI,KAAK;AACpB,EAAA,MAAMC,WAAW,GAAGC,kBAAkB,CAACF,IAAI,EAAEJ,KAAK,CAAC,CAAA;;AAEnD;AACA,EAAA,IAAIC,QAAQ,IAAII,WAAW,CAACE,KAAK,GAAGN,QAAQ,EAAE;IAC5C,MAAMO,SAAS,GAAGC,IAAI,CAACC,IAAI,CAACL,WAAW,CAACE,KAAK,GAAGN,QAAQ,CAAC,CAAA;;AAEzD;AACAI,IAAAA,WAAW,CAACM,MAAM,GAAGN,WAAW,CAACM,MAAM,GAAGH,SAAS,GAAG,CAACA,SAAS,GAAG,CAAC,IAAI,CAAC,CAAA;AAC3E,GAAA;AAEAL,EAAAA,UAAU,CAACI,KAAK,GAAGE,IAAI,CAACG,GAAG,CAACT,UAAU,CAACI,KAAK,EAAEF,WAAW,CAACE,KAAK,CAAC,CAAA;AAChEJ,EAAAA,UAAU,CAACQ,MAAM,GAAGF,IAAI,CAACG,GAAG,CAACT,UAAU,CAACQ,MAAM,EAAEN,WAAW,CAACM,MAAM,CAAC,CAAA;AAEnE,EAAA,OAAOR,UAAU,CAAA;AACnB,CAAC,EACD;AACEI,EAAAA,KAAK,EAAE,CAAC;AACRI,EAAAA,MAAM,EAAE,CAAA;AACV,CACF;;;;"}